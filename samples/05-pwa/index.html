<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevFest: Web Standards 2017</title>
    <link rel="manifest" href="manifest.json">    
    <style>
      body,
      html{
          margin: 0;
          padding: 0;
          background-color: black;
          overflow: hidden;
      }

      body, #canvas {
        width:100%; 
        height:100%; 
        margin:0px;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" 
    oncontextmenu="event.preventDefault()">
    </canvas>

    <script type='text/javascript'>
      var Module = {
        canvas: (() => {
          const canvas = document.getElementById('canvas');
          canvas.addEventListener("webglcontextlost", (e) => { 
            alert('WebGL context lost. You will need to reload the page.'); 
            e.preventDefault(); 
          }, false);
          return canvas;
        })(),
        setStatus: (status) => { 
          console.log(status); 
        }
      };
    </script>
    <script>
    (async function(){
      if ('serviceWorker' in navigator) {
        try{
          const reg = await navigator.serviceWorker.register('/sw.js');
          console.log('Service Worker has been registered!');
        }catch(err){
          console.log('Service worker registration failed:', err);
        }
      }
    })();
    </script>    
    <script async type="text/javascript" src="webassembly.js"></script>
  </body>
</html>